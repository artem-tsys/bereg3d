!function(t){function e(e){for(var s,n,r=e[0],l=e[1],c=e[2],d=0,u=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);for(h&&h(e);u.length;)u.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,r=1;r<i.length;r++){var l=i[r];0!==o[l]&&(s=!1)}s&&(a.splice(e--,1),t=n(n.s=i[0]))}return t}var s={},o={0:0},a=[];function n(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var h=l;a.push([3,1]),i()}({3:function(t,e,i){"use strict";i.r(e);var s=i(0),o=i.n(s);function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.complexData={},this.imageUrl=e.imageUrl,this.id=e.id,this.numberSlide=e.numberSlide,this.controllPoint=e.controllPoint,this.activeSlide=e.activeSlide,this.mouseSpeed=e.mouseSpeed,this.idCopmlex=e.idCopmlex,this.type=e.type,this.click=e.click,this.idCopmlex=e.idCopmlex}return function(t,e,i){e&&a(t.prototype,e)}(t,[{key:"init",value:function(t){this.setActiveSvg=t,this.getData(this.selectSvg)}},{key:"getData",value:function(t){var e=this;o.a.ajax("/wp-content/themes/bereg/assets/s3d/svg.json").done((function(i){t.call(e,i)}))}},{key:"selectSvg",value:function(t){if("complex"===this.type)this.createSvg(t.complex,this.type);else if("house"===this.type){for(var e in t.house)this.createSvg(t.house[e],e);this.setActiveSvg()}}},{key:"createSvg",value:function(t,e){var i=this,s=createMarkup("div","#js-s3d__wrapper__"+this.idCopmlex,{class:"js-s3d__svg-container js-s3d__svg-container"+("complex"===e?"__complex":e)}),a=function(e){var a=document.createElement("div");+e==+i.activeSlide?a.classList="js-s3d__svgWrap "+i.type+"__"+e+" js-s3d__svg__active":a.classList="js-s3d__svgWrap "+i.type+"__"+e,o()(s).append(a),o.a.ajax(t[+e].path).done((function(t){o()(a).append(t.documentElement)}))};for(var n in t)a(n)}}]),t}(),r=function(){return"ios"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mobile")?/iPhone|iPad|iPod/.test(navigator.userAgent):navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android|webOS|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini|iPhone|iPad|iPod/.test(navigator.userAgent)};function l(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.type,this.browser=e.browser,this._x=0,this._pret=0,this._card=0,this.amount=0,this._urlBase=e.url,this._imageUrl=e.imageUrl,this._activeElem=e.activeSlide,this._wrapperId=e.idCopmlex,this._wrapper=o()(".js-s3d__wrapper__"+this._wrapperId),this._ctx=document.getElementById("js-s3d__"+this._wrapperId).getContext("2d"),this._wrapperEvent=".js-s3d__svgWrap",this._height=1080,this._width=1920,this.flagMouse=!1,this.currentSlide=e.activeSlide,this.nextSlide=e.activeSlide,this.openHouses=e.openHouses,this._eventsName={start:"mousedown",end:"mouseup",leave:"mouseleave",move:"mousemove"},this.svgConfig=e,this.controllPoint=e.controllPoint,this.images=[],this.result={min:e.numberSlide.min,max:e.numberSlide.max},this.mouseSpeed=e.mouseSpeed,this.numberSlide={min:e.numberSlide.min,max:e.numberSlide.max},this.startDegCompass=360/this.numberSlide.max,this.infoBox="",this.activeSvg=null,this.activeFloor=null,this.rotate=!0,this.animates=function(){},this.updateInfo=this.updateInfo.bind(this),this.hiddenInfo=this.hiddenInfo.bind(this),this._ActiveHouse=e._ActiveHouse,this.resize=this.resize.bind(this),this.init=this.init.bind(this),this.click=e.click,this.setActiveSvg=this.setActiveSvg.bind(this),this.compass=e.compass,this.left=this.left.bind(this),this.right=this.right.bind(this),this.changeNext=this.changeNext.bind(this),this.changePrev=this.changePrev.bind(this),this.updateActiveFloor=this.updateActiveFloor.bind(this),this.loader=e.loader,this.progress=0,this.loadImage=this.loadImage.bind(this)}return function(t,e,i){e&&l(t.prototype,e)}(t,[{key:"init",value:function(t){var e=this;r("ios")&&(this.mouseSpeed=.5),r()?this._eventsName={start:"touchstart",end:"touchend",leave:"touchcancel",move:"touchmove"}:(this._wrapper.on(this._eventsName.end+" "+this._eventsName.leave,(function(t){t.target.classList.contains("s3d__button")||(e.activeAnimate(!1),e.amount=0,e.flagMouse&&(e.flagMouse=!1,e.rewindToPoint.call(e)))})),this._wrapper.on(this._eventsName.start,(function(t){t.target.classList.contains("s3d__button")||(e.hiddenInfo(t),e.rotateStart.call(e,t),e.activeAnimate(!0))})),this._wrapper.on(this._eventsName.move,this._wrapperEvent,(function(t){e.flagMouse&&e.rotate?(e.activeSvg=o()(t.target).closest("svg"),o()(e.activeSvg).css({opacity:"0"}),e.checkMouseMovement.call(e,t)):"polygon"===t.target.tagName?e.updateInfo(t):e.hiddenInfo(t)}))),this._wrapper.on("click","polygon",(function(t){e._ActiveHouse.set(+t.target.dataset.build),e.openHouses.includes(+t.target.dataset.build)?(e.activeFloor=+t.target.dataset.floor,o()(".js-s3d__svgWrap .active-floor").removeClass("active-floor"),o()(t.target).addClass("active-floor"),e.activeSvg=o()(t.target).closest("svg"),o()(e.activeSvg).css({opacity:""}),e.compass.save(e.compass.current),e.click(t,e.type)):e.updateInfo(t)})),this.firstLoadImage(),this.createSvg(),this.createInfo(),this.createArrow()}},{key:"setConfig",value:function(t){this.type=t.type||this.type,this._urlBase=t.url||this._urlBase,this._imageUrl=t.imageUrl||this._imageUrl,this._activeElem=t.activeSlide||this._activeElem,this._wrapperId=t.idCopmlex||this._wrapperId,this.currentSlide=t.activeSlide||this.currentSlide,this.nextSlide=t.activeSlide||this.nextSlide,this.svgConfig=t||this.svgConfig,this.controllPoint=t.controllPoint||this.controllPoint,this.mouseSpeed=t.mouseSpeed||this.mouseSpeed}},{key:"update",value:function(t){this.loader.hide(this.type)}},{key:"updateImage",value:function(){this.progress=0,this._ctx.canvas.width=this._width,this._ctx.canvas.height=this._height,this.loadImage(0),this.setActiveSvg(this._ActiveHouse.get())}},{key:"firstLoadImage",value:function(){o()(".js-s3d__slideModule").addClass("s3d-unActive"),this._ctx.canvas.width=this._width,this._ctx.canvas.height=this._height;var t=this,e=new Image,i=this._activeElem;e.src="".concat(this._imageUrl+i,".jpg"),e.dataset.id=i,e.onload=function(){t.images[i]=this;var e=t.startDegCompass*t._activeElem+57*t.startDegCompass;o()(".s3d-controller__compass svg").css("transform","rotate(".concat(e,"deg)")),t.compass.save(i),t._ctx.drawImage(this,0,0,t.width,t.height),t.rotate=!1,t.resizeCanvas(),t.loadImage(0)}}},{key:"loadImage",value:function(t,e){var i=this,s=new Image,o=t;s.src="".concat(this._imageUrl+o,".jpg"),s.dataset.id=o,s.onload=function(){return i.images[o]=this,i.progressBarUpdate(),o===i.numberSlide.max?(i.resizeCanvas(),i._ctx.drawImage(i.images[i._activeElem],0,0,i._width,i._height),i.loader.hide(i.type),i.rotate=!0,o):i.loadImage(t+1)},s.onerror=function(t){"error"===e?i.sendResponsiveError(this,i):i.loadImage(+this.dataset.id,"error")}}},{key:"sendResponsiveError",value:function(t,e,i){var s=Object.assign(e.browser,{project:"bereg --prod",url:t.src||t.dataset.id||"пусто",type:i||"error",text:"new"});o.a.ajax("/wp-admin/admin-ajax.php",{method:"POST",data:{data:s,action:"3dDebuger"}}).then((function(t){return console.log(t)}))}},{key:"progressBarUpdate",value:function(){if(this.progress>=this.numberSlide.max)setTimeout((function(){o()(".fs-preloader").removeClass("preloader-active")}),300);else{this.progress+=1;var t=this.progress*(100/(this.numberSlide.max+1));o()(".fs-preloader-amount").html(Math.ceil(t))}}},{key:"resizeCanvas",value:function(){var t=this._width/this._height,e=this._height/this._width,i=o()(".js-s3d__wrapper__complex"),s=o()("#js-s3d__complex");this._width/i.width()<this._height/i.height()?(s.width(i.width()),s.height(i.width()*e)):(s.height(i.height()),s.width(i.height()*t)),this.centerSlider(this._wrapper[0])}},{key:"centerSlider",value:function(t){var e=(t.scrollWidth-document.documentElement.offsetWidth)/2;this._wrapper.scrollLeft(e)}},{key:"setActiveSvg",value:function(t){o()(".js-s3d__container-active").removeClass("js-s3d__container-active"),o()(".js-s3d__svg-container"+t).addClass("js-s3d__container-active")}},{key:"changeNext",value:function(){this._activeElem===this.numberSlide.max?(this.result.max=this.controllPoint[0],this.result.min=-1,this._activeElem=this.numberSlide.min):this._activeElem++,this.compass.set(this._activeElem),this._ctx.drawImage(this.images[this._activeElem],0,0,this._width,this._height)}},{key:"changePrev",value:function(){this._activeElem===this.numberSlide.min?(this.result.max=this.numberSlide.max+1,this.result.min=this.controllPoint[this.controllPoint.length-1],this._activeElem=this.numberSlide.max):this._activeElem--,this.compass.set(this._activeElem),this._ctx.drawImage(this.images[this._activeElem],0,0,this._width,this._height)}},{key:"checkMouseMovement",value:function(t){this._x=t.pageX||t.targetTouches[0].pageX,this.amount+=+((this._x-this._pret)/(window.innerWidth/this.numberSlide.max/this.mouseSpeed)).toFixed(0)}},{key:"rewindToPoint",value:function(){var t=this;this.cancelAnimateSlide(),this.controllPoint.includes(this._activeElem)?this.updateSvgActive(this.type,"_activeElem"):(this.controllPoint.map((function(e){e<t._activeElem&&e>t.result.min?t.result.min=e:e>t._activeElem&&e<t.result.max&&(t.result.max=e)})),0===this.result.min&&(this.result.min=this.controllPoint[this.controllPoint.length-1]-this.numberSlide.max),this.result.max===this.numberSlide.max&&(this.result.max=this.controllPoint[0]+this.numberSlide.max),this.checkResult())}},{key:"updateSvgActive",value:function(t,e){o()(this.activeSvg).css({opacity:""});var i="house"===this.type?".js-s3d__svg-container"+this._ActiveHouse.get()+" ":".js-s3d__svg-container__complex ";o()(i+".js-s3d__svg__active").removeClass("js-s3d__svg__active"),o()(i+"."+t+"__"+this[e]).addClass("js-s3d__svg__active"),this.currentSlide=this[e]}},{key:"repeatChangeSlide",value:function(t){var e=this;return setInterval((function(){t(),e._activeElem===e.nextSlide&&(e.cancelAnimateSlide(),e.updateSvgActive(e.type,"nextSlide"),o()(e.activeSvg).css({opacity:""}))}),30)}},{key:"checkResult",value:function(){(this.result.max-this.result.min)/2+this.result.min<=this._activeElem?(this.result.max<=this.numberSlide.max?this.nextSlide=this.result.max:this.nextSlide=this.controllPoint[0],this.repeat=this.repeatChangeSlide(this.changeNext.bind(this))):(this.result.min>this.numberSlide.min?this.nextSlide=this.result.min:this.nextSlide=this.controllPoint[this.controllPoint.length-1],this.repeat=this.repeatChangeSlide(this.changePrev.bind(this)))}},{key:"cancelAnimateSlide",value:function(){clearInterval(this.repeat),this.repeat=void 0,this.result.min=this.numberSlide.min,this.result.max=this.numberSlide.max}},{key:"createInfo",value:function(){var t=createMarkup("div",".js-s3d__slideModule",{class:"js-s3d__infoBox"}),e='<ul>\n\x3c!--        <li class="js-s3d__infoBox__house">'.concat(textContent.helperFloor.house,': <span>5</span></li>--\x3e\n        \x3c!--<li class="js-s3d__infoBox__section">section: <span>7</span>--\x3e\n        \x3c!--<li class="js-s3d__infoBox__apartments">apartments: <span>10</span></li>--\x3e\n        <li class="js-s3d__infoBox__floor"><span>10</span> ').concat(textContent.helperFloor.floor,"</li>\n    </ul>");o()(t).append(e),this.infoBox=o()(t)}},{key:"updateInfo",value:function(t){var e=o()(".js-s3d__wrap").offset(),i=t.pageX-e.left,s=t.pageY-e.top;this.infoBox.css({opacity:"1"}),this.infoBox.css({top:s-40}),this.infoBox.css({left:i}),this.openHouses.includes(+t.target.dataset.build)?(this.infoBox.find(".js-s3d__infoBox__floor")[0].innerHTML="".concat(textContent.helperFloor.floor,":  ").concat(t.target.dataset.floor||""),this.infoBox.find(".js-s3d__infoBox__floor")[0].style.display=""):this.infoBox.find(".js-s3d__infoBox__floor")[0].style.display="none"}},{key:"updateInfoFloorList",value:function(t){var e=this,i=(t.target||t).dataset;o()(".js-s3d__svgWrap .floor-svg-polygon[data-build="+i.build+"][ data-floor="+i.floor+"]").each((function(t,s){e.updateInfoFloor(s,i)})),this.openHouses.includes(+i.build)?o()("[data-build="+i.build+"] .floor-text").html(i.floor):o()("[data-build="+i.build+"] .floor-text").html("будинок не у продажу")}},{key:"updateInfoFloor",value:function(t,e){var i=o()(t).closest("svg"),s=i.attr("viewBox").split(" ")[2],a=t.getBBox(),n=s/13*.2,r=a.y+a.height/2;o()(i).find(".floor-info-svg[data-build="+e.build+"]").addClass("active-floor-info").attr("y",r-n/2)}},{key:"updateActiveFloor",value:function(t){this.activeFloor=t;var e=o()(".js-s3d__svg__active [data-build="+this._ActiveHouse.get()+"][data-floor="+this.activeFloor+"]")[0];this.updateInfoFloorList(e),o()(".js-s3d__svgWrap .active-floor").removeClass("active-floor"),o()(".js-s3d__svgWrap [data-build="+this._ActiveHouse.get()+"][data-floor="+this.activeFloor+"]").addClass("active-floor")}},{key:"hiddenInfo",value:function(){this.infoBox.css({opacity:"0"}),this.infoBox.css({top:"-10000px"}),this.infoBox.css({left:"-10000px"})}},{key:"hiddenInfoFloor",value:function(){}},{key:"showInfoFloor",value:function(){}},{key:"rotateStart",value:function(t){this.cancelAnimateSlide(),this._x=t.pageX||t.targetTouches[0].pageX,this._pret=t.pageX||t.targetTouches[0].pageX,this.flagMouse=!0,this.activeSvg=o()(t.target).closest("svg"),o()(this.activeSvg).css({opacity:"0"})}},{key:"resize",value:function(){this._height=this._wrapper.height(),this._width=this._wrapper.width(),this._ctx.canvas.width=this._width,this._ctx.canvas.height=this._height,this._ctx.drawImage(this.images[this._activeElem],0,0,this._width,this._height)}},{key:"createSvg",value:function(){new n(this.svgConfig).init(this.setActiveSvg.bind(this,this._ActiveHouse.get()))}},{key:"createArrow",value:function(){var t=createMarkup("button",this._wrapper,{class:"s3d__button s3d__button-left js-s3d__button-left unselectable"});o()(t).append('<svg viewBox="0 0 50 9" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M7 -3.75918e-06L3.93402e-07 4.5L7 9L7 -3.75918e-06Z" fill="#FCFCFC"/>\n<path d="M50 4L50 5L7 4.99999L7 4L50 4Z" fill="#FCFCFC"/>\n</svg>'),o()(".js-s3d__button-left").on("click",this.left);var e=createMarkup("button",this._wrapper,{class:"s3d__button s3d__button-right js-s3d__button-right unselectable"});o()(e).append('<svg viewBox="0 0 50 9" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M43 9L50 4.5L43 0V9Z" fill="#FCFCFC"/>\n<path d="M5.96046e-08 5L0 4L43 4V5L5.96046e-08 5Z" fill="#FCFCFC"/>\n</svg>'),o()(".js-s3d__button-right").on("click",this.right)}},{key:"right",value:function(){var t=this;if(this.rotate){this.rotate=!1;var e=0;this.controllPoint.forEach((function(i,s){t._activeElem===i&&(e=0===s?t.numberSlide.max-t.controllPoint[t.controllPoint.length-1]+(t.controllPoint[0]-t.numberSlide.min):t.controllPoint[s]-t.controllPoint[s-1]-1)})),this.changeSlide(e,this.changePrev)}}},{key:"left",value:function(){var t=this;if(this.rotate){this.rotate=!1;var e=0;this.controllPoint.forEach((function(i,s){t._activeElem===i&&(e=s===t.controllPoint.length-1?t.numberSlide.max-t.controllPoint[s]+(t.controllPoint[0]-t.numberSlide.min):t.controllPoint[s+1]-t.controllPoint[s]-1)})),this.changeSlide(e,this.changeNext)}}},{key:"changeSlide",value:function(t,e){var i=this,s=0;o()(".js-s3d__svg-container").css({opacity:0});var a=setInterval((function(){if(e(),s>=t)return clearInterval(a),i.updateSvgActive(i.type,"_activeElem"),o()(i.activeSvg).css({opacity:""}),o()(".js-s3d__svg-container").css({opacity:1}),void(i.rotate=!0);s++}),30)}},{key:"activeAnimate",value:function(t){t?this.animates=this.animate():window.cancelAnimationFrame(this.animates)}},{key:"animate",value:function(){this.amount>=1?(this.changeNext(),this.amount-=1,this._pret=this._x):this.amount<=-1&&(this.changePrev(),this.amount+=1,this._pret=this._x),this.animates=requestAnimationFrame(this.animate.bind(this))}}]),t}();function h(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.type,this.loader=e.loader,this._wrapperId=e.idCopmlex,this._wrapper=o()(".js-s3d__wrapper__"+this._wrapperId),this.click=e.click,this.configProject=e.configProject,this.scrollToBlock=e.scrollToBlock,this.update=this.update.bind(this),this.setFloorInPage=this.setFloorInPage.bind(this),this.changeCurrentFloor=e.changeCurrentFloor,this.floorEventType="mouseover",this._ActiveHouse=e._ActiveHouse}return function(t,e,i){e&&h(t.prototype,e)}(t,[{key:"init",value:function(t){var e=this;this.update(t),this.changeFloorHtml(t);var i={};this._wrapper.on("click","g",(function(t){t.preventDefault(),e.activeSvg=o()(t.target).closest("svg"),o()(e.activeSvg).css({fill:""}),o()(".s3d-floor__helper").css({visibility:"hidden",opacity:0,top:"-10000px"}),r()?(e.updateInfoFloor(t),i=t,o()(".s3d-floor__helper-close").on("click",(function(t){o()(".s3d-floor__helper").css({visibility:"hidden",opacity:0,top:"-10000px"})}))):e.click(t,e.type)})),o()(".s3d-floor__helper").on("click",(function(t){0===o()(t.target).closest(".s3d-floor__helper-close").length&&(o()(".s3d-floor__helper").css({visibility:"hidden",opacity:0,top:"-10000px"}),e.click(i,e.type))})),r()&&(this.floorEventType="click")}},{key:"updateConfig",value:function(t){this._wrapperId=this.idCopmlex,this.type=t.type,this.section=t.section,this.floor=t.floor}},{key:"update",value:function(t){this.changeFloor(+t.floor)}},{key:"changeFloor",value:function(t){this.changeCurrentFloor(t),this.loader.show(),o()(".js-s3d-nav-floor__left-num").data("active",t).html(t),o()(".js-s3d-nav-floor__list .active").removeClass("active"),o()(".js-s3d-nav-floor__list [data-nav-floor = ".concat(t,"]")).addClass("active"),this.getFloor({house:this._ActiveHouse.get(),floor:t},this.setFloorInPage)}},{key:"changeFloorHtml",value:function(t){for(var e=this,i=+this.configProject.floor.min,s=t.floor,a=this._ActiveHouse.get(),n="",l=i;l<=+this.configProject.floor.max;l++)n+=+l==+s?'<span class="active" data-nav-floor="'.concat(s,'">').concat(s,"</span>"):'<span data-nav-floor="'.concat(l,'">').concat(l,"</span>");var c=' <div class="s3d-nav-floor__top">\n                            <svg width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M52.7516 30.1518C51.7291 27.0909 50.7066 24.0299 49.6842 20.969C49.1957 19.507 46.434 19.5711 46.9758 21.193C47.564 22.9539 48.1522 24.7148 48.7404 26.4756C41.539 19.6661 32.4339 14.5944 22.2188 15.9004C15.478 16.7622 9.24346 20.2425 4.25121 24.7523C3.13316 25.7623 2.02646 26.8276 1.07601 28.0009C0.456862 28.7653 1.53342 31.2791 2.16319 30.5016C9.20162 21.8123 21.2883 16.4048 32.3532 19.1885C38.2514 20.6723 43.3616 24.1172 47.7785 28.209C45.8691 27.7916 43.9596 27.3743 42.0502 26.957C40.2756 26.5692 40.1693 29.0736 41.8287 29.4363C44.9813 30.1253 48.134 30.8144 51.2867 31.5034C52.003 31.66 53.0308 30.9874 52.7516 30.1518Z" fill="#CFA46E"/></svg>\n                            <span class="s3d-nav-floor__top--text"> '.concat(textContent.layout.FloorTitle,' </span>\n                        </div>\n                        <div class="s3d-nav-floor__content js-s3d-nav-floor__hover">\n                             <div class="s3d-nav-floor__house">\n                                <span class="s3d-nav-floor__house-name">').concat(textContent.layout.HouseName,'</span>\n                                <span class="s3d-nav-floor__house-num js-s3d-nav-floor__house-num" data-active="').concat(a,'">').concat(a,'</span>\n                                \n                            </div>\n                            <div class="s3d-nav-floor__left">\n                                <span class="s3d-nav-floor__left-num js-s3d-nav-floor__left-num" data-active="').concat(s,'">').concat(s,'</span>\n                                <span class="s3d-nav-floor__left-name">').concat(textContent.layout.FloorName,'</span>\n                            </div>\n                            <div class="s3d-nav-floor__arrow">\n                              <svg width="9" height="40" viewBox="0 0 9 40"  class="s3d-nav-floor__up js-s3d-nav-floor__up s3d-nav-floor__arrow-up" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 7L4.5 5.90104e-07L4.32743e-06 7L9 7Z" /><path d="M5 40L4 40L4.00001 7L5 7L5 40Z" /></svg>\n                              <svg width="9" height="40" viewBox="0 0 9 40"  class="s3d-nav-floor__down js-s3d-nav-floor__down s3d-nav-floor__arrow-down" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 7L4.5 5.90104e-07L4.32743e-06 7L9 7Z" /><path d="M5 40L4 40L4.00001 7L5 7L5 40Z" /></svg>\n\x3c!--                                <img class="s3d-nav-floor__up js-s3d-nav-floor__up" src="../images/icon/floor-arrow.svg" alt="arrow" class="s3d-nav-floor__arrow-up">--\x3e\n\x3c!--                                <img class="s3d-nav-floor__down js-s3d-nav-floor__down" src="../images/icon/floor-arrow.svg" alt="arrow" class="s3d-nav-floor__arrow-down">--\x3e\n                            </div>\n                             <button type="button" class="s3d-nav-floor__button js-s3d-nav-floor__select">\n                                <span>').concat(textContent.layout.selectFloor,':</span>\n                                <svg width="9" height="40" viewBox="0 0 9 40"  class="s3d-nav-floor__down s3d-nav-floor__arrow-down" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 7L4.5 5.90104e-07L4.32743e-06 7L9 7Z" /><path d="M5 40L4 40L4.00001 7L5 7L5 40Z" /></svg>\n\x3c!--                                <img class="s3d-nav-floor__down" src="../images/icon/floor-arrow.svg" alt="arrow" class="s3d-nav-floor__arrow-down">--\x3e\n                            </button>\n                            <div class="s3d-nav-floor__list js-s3d-nav-floor__list">\n                                   ').concat(n,"\n                            </div>\n                        </div>");function h(){o()(".js-s3d-nav-floor__list").removeClass("active"),o()(".js-s3d-nav-floor__select").removeClass("active"),o()(".js-s3d-nav-floor__list").off("mouseout",h)}function d(t){o()(".js-s3d-nav-floor__list").removeClass("active"),o()(document).off("click",d)}createMarkup("div","#js-s3d__wrapper__"+this._wrapperId,{class:"s3d-nav-"+this._wrapperId,content:c}),r()?o()(".js-s3d-nav-floor__select").on("click",(function(){var t=o()(".js-s3d-nav-floor__list"),e=o()(".js-s3d-nav-floor__select");t.hasClass("active")?(o()(document).click(d),t.addClass("active"),e.addClass("active")):d(),t.toggleClass("active"),e.toggleClass("active")})):o()(".js-s3d-nav-floor__hover").on("mouseover",(function(){var t=o()(".js-s3d-nav-floor__list"),e=o()(".js-s3d-nav-floor__select");t.addClass("active"),e.addClass("active"),o()(this).addClass("s3d-nav-floor-active"),t.on("mouseout",h)})),o()(".js-s3d-nav-floor__list").on("click",(function(t){var i=o()(t.target).data("nav-floor");i&&e.changeFloor(i)})),o()(".js-s3d-nav-floor__up").on("click",(function(){var t=o()(".s3d-nav-floor__left-num").data("active");t<e.configProject.floor.max&&e.changeFloor(t+1)})),o()(".js-s3d-nav-floor__down").on("click",(function(){var t=o()(".s3d-nav-floor__left-num").data("active");t>e.configProject.floor.min&&e.changeFloor(t-1)}))}},{key:"getFloor",value:function(t,e){var i="action=getFloor&house=".concat(t.house,"&floor=").concat(t.floor);o.a.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:i,success:function(t){return e(t)}})}},{key:"resize",value:function(){var t=o()(document).width(),e=o()(document).height();t<=1024?(o()("#js-s3d__floor svg").css({width:"",height:o()("#js-s3d__floor").width()-20+"px"}),o()("#js-s3d__floor").css({width:"",height:o()("#js-s3d__floor").width()-20+"px"})):t>e?(o()("#js-s3d__floor svg").css({width:o()("#js-s3d__floor").height()+"px",height:"100%"}),o()("#js-s3d__floor").css({width:o()("#js-s3d__floor").height()+"px",height:"100%"})):(o()("#js-s3d__floor svg").css({width:o()("#js-s3d__floor").height()+"px",height:o()("#js-s3d__floor").width()+"px"}),o()("#js-s3d__floor").css({width:o()("#js-s3d__floor").height()+"px",height:o()("#js-s3d__floor").width()+"px"}))}},{key:"setFloorInPage",value:function(t){o()("#js-s3d__"+this._wrapperId).html(JSON.parse(t)),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.each((function(e,o){var a=$("".concat(i).concat(e)),n=s.attr("viewBox").split(" ")[2],r=o.getBBox(),l=n/7*t,c=n/13*t,h=r.x+r.width/2,d=r.y+r.height/2;a.attr({x:h-l/2,y:d-c/2,width:l,height:c})}))}(1,o()(".entrance-flats__item_floor--active"),".svg-tip-plan-floor-",o()("#floor--svg")),this.loader.hide(this.type),o()("#js-floor svg").on(this.floorEventType,this.updateInfoFloor),o()("#js-floor svg polygon").on("mouseout",(function(){return o()(".s3d-floor__helper").css({top:"",left:"",opacity:""})}))}},{key:"updateInfoFloor",value:function(t){if("polygon"===t.target.tagName){o()(".s3d-floor__helper").css({opacity:0});var e=t.pageX||t.targetTouches[0].pageX,i=t.pageY||t.targetTouches[0].pageY,s=o()(t.target)[0].closest("g").dataset;s.image&&o()(".js-s3d-floor__helper-img").attr("src",s.image),s.type&&o()(".js-s3d-floor__helper-type").html(s.type),s.rooms&&o()(".js-s3d-floor__helper-flat").html(s.rooms),s.square&&o()(".js-s3d-floor__helper-area").html(s.square),s.living&&o()(".js-s3d-floor__helper-place").html(s.living),o()(".s3d-floor__helper").css({visibility:"visible",top:i-120,left:e,opacity:1})}else o()(".s3d-floor__helper").css({visibility:"hidden",top:"",left:"",opacity:""})}}]),t}();function u(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.idCopmlex=e.idCopmlex,this.type=e.type,this.loader=e.loader,this._wrapperId=e.idCopmlex,this._wrapper=o()(".js-s3d__wrapper__"+this._wrapperId),this.click=e.click,this.scrollToBlock=e.scrollToBlock}return function(t,e,i){e&&u(t.prototype,e)}(t,[{key:"initPlan",value:function(t){fetch(t["3d"]).then((function(t){return t.ok?t:Promise.reject(t)})).then((function(){o()(".plan").addClass("plan-active")})).catch((function(){o()(".plan").removeClass("plan-active")}))}},{key:"init",value:function(t){var e=this;o()(document).on("change",".js-switch-btn",(function(t){var i=t.target.checked?"3d":"2d";!function(t){e.image.setAttribute("src",t),e.image.setAttribute("data-mfp-src",t)}(e.pathImages[i]),function(t){document.querySelector(".active[data-plane]").classList.remove("active"),document.querySelector('[data-plane][data-type="'.concat(t,'"]')).classList.add("active")}(i)})),o()(".s3d-filter__plan").removeClass("s3d-filter__plan-active"),this.getPlane(t)}},{key:"update",value:function(t){o()(".s3d-filter__plan").removeClass("s3d-filter__plan-active"),this.getPlane(t)}},{key:"getPlane",value:function(t){var e=this,i="action=getFlatById&id="+t.flat;o.a.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:i,success:function(t){return e.setPlaneInPage(t)}})}},{key:"setPlaneInPage",value:function(t){var e=this;o()("#js-s3d__"+this.idCopmlex).html(JSON.parse(t)),this.loader.hide(this.type),o()(".flat-group2 ").on("click","polygon",this.openPopup),o()("#js-s3d__wrapper__apart .form-js").on("click",(function(){return o()(".common-form-popup-js").addClass("active")})),o()(".js-flat-button-return").on("click",(function(t){t.preventDefault(),o()(".js-s3d-select__floor").click()})),o()(".js-s3d-popup__mini-plan svg").on("click","polygon",(function(t){e.activeSvg=o()(t.target).closest("svg"),o()(e.activeSvg).css({fill:""}),o()(".s3d-floor__helper").css({opacity:0,top:"-10000px"}),e.click(t,"floor"),o()(".js-s3d-popup__mini-plan").removeClass("active")})),this.image=document.querySelector("[data-flat-image]"),this.pathImages=JSON.parse(this.image.dataset.src),this.initPlan(this.pathImages)}},{key:"openPopup",value:function(){o()(".js-s3d-popup__mini-plan").addClass("active"),o()(".js-s3d-popup__mini-plan__close").on("click",(function(){return o()(".js-s3d-popup__mini-plan").removeClass("active")}))}}]),t}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}i(1);var m=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrapper=e.wrap||"",this.filterName={range:["area","floor","living","price","priceM2"],checkbox:["house","rooms"]},this.filter={},this.nameFilterFlat={area:"all_room",living:"life_room",house:"build_name",floor:"floor",rooms:"rooms",price:"price",priceM2:"price_m2"},this.filterSelect={},this.flatList=i,this.currentAmountFlat=i.length,this.openHouses=e.openHouses,this.hidden=this.hidden.bind(this),this.show=this.show.bind(this)}return function(t,e,i){e&&v(t.prototype,e)}(t,[{key:"init",value:function(t){var e=this;$(".js-s3d-filter__button--reset").on("click",(function(){return e.resetFilter()})),$(".js-s3d-filter__select").on("click","input",(function(){return e.showSvgSelect()})),$(".js-s3d-filter__button--apply").on("click",(function(){return $(".js-s3d-filter").removeClass("active")})),$(".js-s3d-filter__show").on("click",(function(){return e.showAvailableFlat()})),$(".js-s3d-filter__close").on("click",(function(){$(".js-s3d-filter").removeClass("active")})),$(".js-s3d-filter__open").on("click",(function(){$(".js-s3d-filter").addClass("active"),$(".js-s3d-filter__show--input").prop("checked")||$(".js-s3d-filter__show--input").click()})),this.filterName.checkbox.forEach((function(t){for(var e=$('.js-s3d-filter [data-type="house"]').length,i=0;i<e;i++)$(".js-s3d-filter #house-"+(i+1))[0].dataset[t]=i+1})),this.filterName.range.forEach((function(i){var s=e.getAttrInput(i);if(s){for(var o in t[e.nameFilterFlat[i]])s[o]="min"===o?Math.floor(+t[e.nameFilterFlat[i]][o]):Math.ceil(+t[e.nameFilterFlat[i]][o]);e.createRange(s)}})),this.setAmountSelectFlat(this.flatList.length)}},{key:"getNameFilterFlat",value:function(){return this.nameFilterFlat}},{key:"showSvgSelect",value:function(){var t=this.applyFilter(this.flatList);this.setAmountSelectFlat(this.currentAmountFlat);var e=function(e){+t[e].length>0&&t[e].forEach((function(t){$(".js-s3d__svg-container__complex").length>0&&$('#js-s3d__wrapper__complex polygon[data-build="'+e+'"][ data-floor="'+t+'"]').css({opacity:.5})}))};for(var i in t)e(i)}},{key:"showAvailableFlat",value:function(){$(".js-s3d-filter__show--input").click(),$(".js-s3d-filter__show--input").prop("checked")?(this.showSvgSelect(this.flatList),$(".floor-info-helper").css("opacity","1")):($("#js-s3d__wrapper polygon").css({opacity:""}),$(".floor-info-helper").css("opacity","0"))}},{key:"show",value:function(){$(".js-s3d-filter").addClass("active")}},{key:"hidden",value:function(){$(".js-s3d-filter").removeClass("active")}},{key:"getAttrInput",value:function(t){return $(".js-s3d-filter__"+t+"--input").length>0&&$(".js-s3d-filter__"+t+"--input").data()}},{key:"getAttrSelect",value:function(t){var e=$(".js-s3d-filter__"+t+"--input:checked").length?$(".js-s3d-filter__"+t+"--input:checked"):$(".js-s3d-filter__"+t+"--input"),i={type:e.data("type"),value:[]};return e.each((function(e,s){return i.value.push($(s).data(t))})),i}},{key:"createRange",value:function(t){if(void 0!==t.type){var e,i=function(t){r.prop("value",t.from),l.prop("value",t.to)},s=function(t){var i=$(this).prop("value");"from"===t?i<a?i=a:i>e.result.to&&(i=e.result.to):"to"===t&&(i<e.result.from?i=e.result.from:i>n&&(i=n)),e.update("from"===t?{from:i}:{to:i}),$(this).prop("value",i),o.showSvgSelect()},o=this,a=t.min,n=t.max,r=$(".js-s3d-filter__"+t.type+"__min--input"),l=$(".js-s3d-filter__"+t.type+"__max--input");$(".js-s3d-filter__"+t.type+"--input").ionRangeSlider({type:"double",grid:!1,min:t.min||0,max:t.max||0,from:t.min||0,to:t.max||0,step:t.step||1,onStart:i,onChange:i,onFinish:function(t){i(t),o.showSvgSelect()},onUpdate:i}),e=$(".js-s3d-filter__"+t.type+"--input").data("ionRangeSlider"),r.on("change",(function(){s.call(this,"from")})),l.on("change",(function(){s.call(this,"to")}))}}},{key:"setRange",value:function(t){void 0!==t.type&&(this.filter[t.type]={},this.filter[t.type].type="range",this.filter[t.type].elem=$(".js-s3d-filter__"+t.type+"--input").data("ionRangeSlider"))}},{key:"setCheckbox",value:function(t){void 0!==t.type&&(this.filter[t.type]&&this.filter[t.type].elem||(this.filter[t.type]={},this.filter[t.type].elem=[],this.filter[t.type].value=[],this.filter[t.type].type="select"),this.filter[t.type].elem=$(".js-s3d-filter__"+t.type+" [data-type = "+t.type+"]"))}},{key:"resetFilter",value:function(){for(var t in $("#js-s3d__wrapper polygon").css({opacity:""}),this.filter)"range"===this.filter[t].type?this.filter[t].elem.update({from:this.filter[t].elem.result.min,to:this.filter[t].elem.result.max}):this.filter[t].elem.each((function(t,e){e.checked&&(e.checked=!1)}));this.showSvgSelect()}},{key:"applyFilter",value:function(t){return this.clearFilterParam(),this.checkFilter(),this.getFilterParam(),this.filterFlat(t)}},{key:"checkFilter",value:function(){var t=this;this.filterName.range.forEach((function(e){var i=t.getAttrInput(e);i&&t.setRange(i)})),this.filterName.checkbox.forEach((function(e){return t.setCheckbox(t.getAttrSelect(e))}))}},{key:"setAmountSelectFlat",value:function(t){$(".js-s3d-filter__open-num").html(t),$(".js-s3d-filter__amount-flat__num").html(t)}},{key:"filterFlat",value:function(t){var e=this;return this.currentAmountFlat=0,t.filter((function(t){var i=function(i){return 1==+t.sale&&e.openHouses.includes(+t[e.nameFilterFlat.house])?e.filterName.checkbox.includes(i)&&e.filter[i].value.length>0&&!e.filter[i].value.some((function(s){if(+t[e.nameFilterFlat[i]]==+s)return!0}))||e.filterName.range.includes(i)&&(+t[e.nameFilterFlat[i]]<+e.filter[i].min||+t[e.nameFilterFlat[i]]>+e.filter[i].max)?{v:!1}:void 0:{v:void 0}};for(var s in e.filter){var o=i(s);if("object"===p(o))return o.v}return 0===e.filter.house.value.length&&0===e.filter.rooms.value.length?{}:(void 0===t[e.nameFilterFlat.house]||e.filterSelect[t[e.nameFilterFlat.house]]||(e.filterSelect[t[e.nameFilterFlat.house].match(/^(\d+)/)[1]]=[]),void 0!==t[e.nameFilterFlat.floor]&&e.filterSelect[t[e.nameFilterFlat.house]]&&!e.filterSelect[t[e.nameFilterFlat.house]].includes(t[e.nameFilterFlat.floor])&&t[e.nameFilterFlat.floor]>0&&e.filterSelect[t[e.nameFilterFlat.house]].push(t[e.nameFilterFlat.floor]),e.currentAmountFlat+=1,t)})),this.filterSelect}},{key:"getFilterParam",value:function(){var t=this,e=function(e){switch(t.filter[e].type){case"select":$(".js-s3d-filter__"+e+"--input:checked").each((function(i,s){t.filter[e].value.push($(s).data(e))}));break;case"range":t.filter[e].min=t.filter[e].elem.result.from,t.filter[e].max=t.filter[e].elem.result.to}};for(var i in this.filter)e(i)}},{key:"clearFilterParam",value:function(){this.filterSelect={},this.filter={},$("#js-s3d__wrapper polygon").css({opacity:""}),this.setAmountSelectFlat(this.flatList.length)}}]),t}();function _(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.history=[],this.click=e.scrollToBlock,this.animateBlock=e.animateBlock,this.update=this.update.bind(this)}return function(t,e,i){e&&_(t.prototype,e)}(t,[{key:"init",value:function(){var t=this;this.pageLoad(),window.onpopstate=function(){t.on_popstate()},this.history.push("complex")}},{key:"pageLoad",value:function(){if(null===window.history.state)return window.history.replaceState({isBackPage:!0},null,null),void window.history.pushState({isBackPage:!1},null,null)}},{key:"on_popstate",value:function(t){window.history.pushState({isBackPage:!1},null,null),this.history.length>0&&(this.history.pop(),this.animateBlock("translate","down"),this.click(700)(this.history[this.history.length-1]))}},{key:"update",value:function(t){this.history.push(t)}}]),t}();function y(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var w=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.id=e.id,this.sectionName=["complex","floor","apart"],this.activeSectionList=["complex"],this.activeSection="complex",this.activeHouse=void 0,this.init=this.init.bind(this),this.filterInit=this.filterInit.bind(this),this.loader={show:function(){o()(".fs-preloader").addClass("preloader-active"),o()(".fs-preloader-bg").css({filter:"blur(10px)"})},hide:function(t){t&&i.scrollToBlock(0)(t),setTimeout((function(){o()(".fs-preloader").removeClass("preloader-active"),o()(".fs-preloader-bg").css({filter:"none"}),o()(".first-loader").removeClass("first-loader")}),300)}},this.configProject={},this.changeCurrentFloor=this.changeCurrentFloor.bind(this),this.scrollToBlock=this.scrollToBlock.bind(this),this.animateBlock=this.animateBlock.bind(this),this._ActiveHouse={get:function(){return i.activeHouse},set:function(t){i.activeHouse=+t}},this.compass={set:function(t){var e=0;t?(i.compass.current=t,e=3*t+3*i.compass.default):e=i.compass.defaultDeg,o()(".s3d-filter__compass svg").css("transform","rotate(-"+e+"deg)")},setApart:function(){o()(".s3d-filter__compass svg").css("transform","rotate("+i.compass.degApart+"deg)")},setFloor:function(){o()(".s3d-filter__compass svg").css("transform","rotate("+i.compass.degFloor+"deg)")},save:function(t){i.compass.lastDeg=t},current:0,default:57,defaultDeg:-230,degApart:-310,degFloor:-230,lastDeg:-230}}return function(t,e,i){e&&y(t.prototype,e)}(t,[{key:"init",value:function(){var t=this;this.history=new g({scrollToBlock:this.scrollToBlock,animateBlock:this.animateBlock}),this.history.init(),this.getFlatList("/wp-admin/admin-ajax.php",this.filterInit),this.loader.show();var e=this.config.complex;e.idCopmlex="complex",e.type="complex",e.click=this.selectSlider.bind(this),e.loader=this.loader,e._ActiveHouse=this._ActiveHouse,e.compass=this.compass,e.openHouses=this.config.openHouses,this.createWrap(e,"canvas"),this.complex=new c(e),this.complex.init(),o()(".js-s3d__wrapper__complex").css("z-index","100"),o()(".s3d-select__head").on("click",(function(e){var i=o()(e.currentTarget).next();i.css({visibility:"visible"}),o()("body").on("mousedown",(function(e){!function t(e,s){"s3d-select-value"===s.target.className&&s.target.dataset.house&&e.selectSlider(s,e.complex.type),o()("body").off("click",(function(e){t(e)})),i.css({visibility:"hidden"})}(t,e)}))})),this.animateFlag=!0,o()(".js-s3d-controller__elem").on("click",".s3d-select",(function(e){var i=e.currentTarget.dataset.type;i&&i!==t.activeSection&&(t.history.update(i),t.scrollBlock(e,i))})),this.resize()}},{key:"scrollBlock",value:function(t,e){var i=this.activeSectionList.findIndex((function(t){if(t===e)return!0}));this.animateFlag&&this.activeSectionList.length>=2&&(this.complex.hiddenInfo(),this.animateFlag=!1,t.originalEvent&&t.originalEvent.wheelDelta/120>0?(this.animateBlock("translate","up"),i>0?(this.history.update(this.activeSectionList[i-1]),this.scrollToBlock(700)(this.activeSectionList[i-1])):0===i&&(this.history.update(this.activeSectionList[this.activeSectionList.length-1]),this.scrollToBlock(700)(this.activeSectionList[this.activeSectionList.length-1]))):t.originalEvent&&t.originalEvent.wheelDelta/120<0?(this.animateBlock("translate","down"),i<this.activeSectionList.length-1?(this.history.update(this.activeSectionList[i+1]),this.scrollToBlock(700)(this.activeSectionList[i+1])):i===this.activeSectionList.length-1&&(this.history.update(this.activeSectionList[0]),this.scrollToBlock(700)(this.activeSectionList[0]))):(this.animateBlock("translate","down"),this.scrollToBlock(700)(e)))}},{key:"filterButtonShowHide",value:function(t){"complex"!==t&&o()(".js-s3d-filter").removeClass("active")}},{key:"getFlatList",value:function(t,e){o.a.ajax({url:t,type:"POST",data:"action=getFlats",success:function(t){e(JSON.parse(t))}})}},{key:"getMinMaxParam",value:function(t){var e=this,i=this.filter.getNameFilterFlat();t.forEach((function(t){for(var s in t)for(var o in i)if(s===i[o]){var a="string"==typeof t[s]?t[s].replace(/\s+/g,""):t[s];e.configProject[s]||(e.configProject[s]={min:a,max:a}),a<+e.configProject[s].min&&(e.configProject[s].min=a),a>+e.configProject[s].max&&(e.configProject[s].max=a)}}))}},{key:"filterInit",value:function(t){this.filter=new m(this.config,t),this.getMinMaxParam(t),this.filter.init(this.configProject)}},{key:"createWrap",value:function(t,e){var i=createMarkup("div","#"+t.id,{class:"js-s3d__wrap js-s3d__wrapper__"+t.idCopmlex}),s=createMarkup("div",i,{id:"js-s3d__wrapper__"+t.idCopmlex,style:"position:relative;"});createMarkup(e,s,{id:"js-s3d__"+t.idCopmlex})}},{key:"selectSlider",value:function(t,e){switch(t.currentTarget.dataset.build||t.currentTarget.value,this.loader.show(),e){case"complex":this.selectSliderType(t,"floor",d);break;case"floor":o()(".fs-preloader").addClass("s3d-preloader__full"),this.selectSliderType(t,"apart",f)}this.resize()}},{key:"selectSliderType",value:function(t,e,i){var s;this.history.update(e),"house"===e?(s=this.config.house.config[this.activeHouse],o()(".js-s3d-select__number-house").html(this.activeHouse)):(s=this.config[e],t.currentTarget.dataset.section&&(s.section=t.currentTarget.dataset.section),t.currentTarget.dataset.floor&&(s.floor=t.currentTarget.dataset.floor),t.currentTarget.dataset.flat_id&&(s.flat=t.currentTarget.dataset.flat_id)),s.idCopmlex=e,s.type=e,s.loader=this.loader,s.configProject=this.configProject,s.changeCurrentFloor=this.changeCurrentFloor,s._ActiveHouse=this._ActiveHouse,s.compass=this.compass,o()("#js-s3d__"+e).length>0?this[e].update(s):(s.click=this.selectSlider.bind(this),s.scrollToBlock=this.scrollToBlock.bind(this),this.createWrap(s,"house"!==e?"div":"canvas"),this[e]=new i(s),this[e].init(s),this.activeSectionList.push(s.idCopmlex),o()(".js-s3d-select[data-type =".concat(s.type,"]")).prop("disabled",!1))}},{key:"scrollToBlock",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(i){setTimeout((function(){t.filter&&t.filter.hidden(),t.complex.hiddenInfo(),t.complex.hiddenInfoFloor(),t.compass.save(t.compass.current),"apart"===i?t.compass.setApart():"floor"===i?t.compass.setFloor():t.compass.set(t.compass.lastDeg),t.changeBlockIndex(i)}),e)}}},{key:"changeBlockIndex",value:function(t){var e=this;o()(".js-s3d-select.active").removeClass("active"),this.sectionName.forEach((function(i){i===t?(e.activeSection=i,o()(".js-s3d__wrapper__".concat(i)).css("z-index","100"),o()(".js-s3d-select[data-type = ".concat(i,"]")).addClass("active"),o()(".js-s3d-controller")[0].dataset.type=i):o()(".js-s3d__wrapper__".concat(i)).css("z-index","")}))}},{key:"changeCurrentFloor",value:function(t){this.complex.updateActiveFloor(t)}},{key:"animateBlock",value:function(t,e){var i=this,s=document.querySelectorAll("."+t+"-layer");s[0].classList.remove("translate-layer__down","translate-layer__up","active"),s[0].classList.add("translate-layer__"+e),setTimeout((function(){return s[0].classList.add("active")}),100),setTimeout((function(){return i.animateFlag=!0}),1e3)}},{key:"helpsInfo",value:function(){window.localStorage.getItem("helps")||o()(".js-first-info").css({visibility:"visible"}),o()(".js-first-info__button").on("click",(function(t){switch(t.target.dataset.type){case"next":var e=o()(".js-first-info-step.active").removeClass("active").data("step");o()('.js-first-info-step[data-step="'.concat(e+1,'"]')).addClass("active");break;case"end":o()(".js-first-info-step.active").removeClass("active"),window.localStorage.setItem("helps",!0),o()(".js-first-info").css({visibility:""})}}))}},{key:"createHelper",value:function(){}},{key:"resize",value:function(){this.complex.resizeCanvas()}}]),t}(),x=function(t,e,i){var s=document.createElement(t);return s.classList=i.class||"",i.id&&(s.id=i.id),i.style&&(s.style.cssText=i.style),i.value&&(s.value=i.value),i.type&&(s.type=i.type),i.placeholder&&(s.placeholder=i.placeholder),i.content&&(s.innerHTML=i.content),"string"==typeof e?document.querySelector(e).append(s):e.append(s),s},j="ru";window.nameProject="bereg",window.defaultProjectPath="/wp-content/themes/".concat(window.nameProject,"/assets"),window.defaultModulePath="/wp-content/themes/".concat(window.nameProject,"/assets/s3d/"),window.defaultStaticPath="/wp-content/themes/".concat(window.nameProject,"/static/"),window.status="local",document.addEventListener("DOMContentLoaded",(function(t){o.a.ajax({url:"/wp-content/themes/".concat(nameProject,"/assets/s3d/textHelper.json"),success:function(t){o()(".lang-block__item").each((function(t,e){if(!o()(e).hasClass("inactive")){var i=o()(e).find("a").html().toLowerCase();j="рус"===i||"ru"===i?"ru":"eng"===i||"en"===i?"en":"ua"}})),window.textContent=t[j],function(){window.createMarkup=x;var t,e={complex:{url:"",imageUrl:"/wp-content/themes/".concat(nameProject,"/assets/s3d/images/").concat(nameProject,"/"),id:"js-s3d__wrapper",numberSlide:{min:0,max:178},controllPoint:[25,55,110,165],activeSlide:25,mouseSpeed:1},floor:{id:"js-s3d__wrapper"},apart:{id:"js-s3d__wrapper"},openHouses:[1,2]};new Promise((function(t){!function(t){var e=[],i=0,s="/wp-content/themes/bereg/assets/s3d/images/bereg/".concat(32,".jpg"),o=new Image;!function t(a){var n=(new Date).getTime();if(i<4)o.src="".concat(s,"?t=").concat(n),o.onload=function(){var s=(new Date).getTime()-n;e[i]=s,t(a),i++},o.onerror=function(){var s=(new Date).getTime()-n;e[i]=s,t(a),i++};else{var r=e.reduce((function(t,e){return t+e}))/e.length;a(r)}}((function(e){return t({fastSpeed:e<=100,middleTime:e,checkImage:32}),e}))}(t)})).then((function(i){document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px")),i.fastSpeed||(e.complex.imageUrl+="mobile/"),r("mobile")&&o()(".js-s3d__slideModule").addClass("s3d-mobile"),e.complex.browser=Object.assign(function(){var t,e=function(t){for(var e=0;e<t.length;e++){var i=t[e].string,s=t[e].prop;if(i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(s)return t[e].identity}}([{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}])||"an unknown OS",i=navigator.userAgent,s=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(s[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(i)||[])[1]||"",platform:e}:"Chrome"===s[1]&&null!=(t=i.match(/\b(OPR|Edge)\/(\d+)/))?{name:t[1].replace("OPR","Opera"),version:t[2],platform:e}:(s=s[2]?[s[1],s[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=i.match(/version\/(\d+)/i))&&s.splice(1,1,t[1]),{name:s[0],version:s[1],platform:e})}(),i),(t=new w(e)).init(),o()(window).resize((function(){t.resize(),document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px"))}))}))}()}})}))}});